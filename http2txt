1workk
- Что такое HTTP? - протокол прикладного уровня, по которому клиент общается с сервером
- Особенности HTTP 1.0? 
   HTTP 1.0 - Все запросы / ответы - обычный текст, 
   Клиент инициирует запрос - сервер отвечает, 
   Stateless - каждый вопрос независим, сервер не помнит предыдущие запросы. 
   1 соединение - запрос
   Методы
    GET
    HEAD
    POST
- Нижележащие протоколы
   DNS — переводит имя в IP
   TCP — гарантирует доставку данных
   HTTP — определяет формат общения 
- Порты
   - 80 - HTTP
   - 443 - HTTPS
- Структура HTTP отвечает
   - HTTP/1.0 200 OK
- Основные коды
   - 200 OK
   - 404 Not found
   - 500 server error
---------
2workk
- Улучшения
   Виртуальный хостинг + обязательное указания заголовка HEAD 
   Keep-Alive - соединение открыто для нескольких запросов
   Чанковая передача
   Доп. Методы
    PUT
    DELETE
    OPTIONS
   Улучшение кэширования
   Коды состояния
---------
3workk
- Тело запроса - содержит json и условный html
- Заголовки Content-Lenght / Content-Type
---------
4workk
- skip
---------
5workk
- Проблема передачи данных неизвестного размера
     В обычном HTTP используется Content-Length, который требует знать размер данных заранее.
     Проблема: при потоковой передаче (видео, логи, динамически генерируемый контент) размер заранее неизвестен.
     Решение: чанковая передача (chunked transfer encoding) — данные передаются частями, без полного размера заранее.
- Структура чанка 
    8\r\n - размер чанка + HEX(8байт + разделитель, отделяющий между размером и данными)
    Chunk 1\r\n - данные чанка(данные + разделитель)
    8\r\n
    Chunk 2\r\n
    0\r\n\r\n - передача размером 0(символизирует, что передача завершена.)
r - возврат клетки
n - новая строка
---------
6workk
- Query string — это часть URL после символа ?, которая используется для передачи параметров серверу в формате
- Структура Query String
    /get?query=java&lang=en - ? отделяет парматеры от пути, query - ключ, java - значение, & - отделяет параметры
- идемпотентность GET
 Идемпотентность значит: сколько раз ни отправляй один и тот же GET-запрос — результат одинаковый (если данные не изменились) 
  Пример: GET /search?query=book (GET не должен изменять состояния сервера). Нужен для поиска, фильтрации, получения данных
- Неидемпотентность POST
 Неидемпотентность значит: меняет состояние сервера, может менять данные, новый запрос - другой результат
- Query string в POST
 Допустим, но может использоваться как вспомогательный способ.
  POST /login?source=web - основные данные в теле
---------
7workk
- HTTP-редирект — это ответ сервера с кодом 3xx, который говорит клиенту: «Ресурс не здесь, иди по другому адресу».
 Пример
    HTTP/1.1 301 Moved Permanently - 3хх ошибка
    Location: https://example.com/new-page - клиент читает, идет по ссылку
- Зачем нужны редиректы?
 Когда сайт переехал на HTTPS
 Поменялась URL структура
 Страница недоступна
- Коды редиректов
  301 - переехал навсегда
  302 - переехал на время
  303 - see other
  307 - как 301, но метод сохраняется
  308 - как 302, но метод сохраняется
- Поведение клиентов
 Браузер - следует автоматически
 curl не следует. -L включает переход
 telnet показывает сырой http ответ. Нужен чтобы увидеть сам редирект
---------
8workk
- Базовая ауентификация:
 Клиент отправляет логин и пароль серверу через HTTP заголовок
 Если нет данных сервер возвращает ошибку 401
 Клиент отправляет новый запрос с заголовком Authorization: Basic <Base64(логин:пароль)>
 Сервер возвращает 200
---------
9workk
- curl - это утилита командной строки для отправки HTTP-запросов и получения ответов. Она упрощает работу с API и загрузку файлов, в отличие от telnet, который требует ручного формирования запросов.
- Ключевые флаги curl
 -X, --request <метод>
  curl -X POST ... - метод запроса
 -H, --header <заголовок>
  -H "Content-Type: application/json" - добавить заголовок
 -d, --data <данные> - тело запроса, условно json
 -v, --verbose - подробный вывод
 --head - вывод только заголовка
 -o <файл> - сохранить тело вывода в файл
 -L, --location - автоматический переход по ридеркту